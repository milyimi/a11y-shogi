<?php

/**
 * 将棋の詰み局面参照データベース
 * 難易度別に標準的な詰み問題を定義
 */

return [
    // ========== 初級詰み（1手詰め） ==========
    'beginner' => [
        // 詰み1手: 飛車の横利きで詰める
        'mate_1hand_hisha_horizontal' => [
            'description' => '飛車の横利きで後手玉を詰める（1手詰め）',
            'turn' => 'sente',
            'board' => [
                '1' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'gyoku', 'color' => 'gote'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '2' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => null,
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '3' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'hisha', 'color' => 'sente'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '4' => array_fill(1, 9, null),
                '5' => array_fill(1, 9, null),
                '6' => array_fill(1, 9, null),
                '7' => array_fill(1, 9, null),
                '8' => array_fill(1, 9, null),
                '9' => array_fill(1, 9, null),
            ],
            'hand' => ['sente' => [], 'gote' => []],
            'expected_move' => ['from' => ['rank' => 3, 'file' => 5], 'to' => ['rank' => 1, 'file' => 5]],
            'expected_mating_move' => true,
        ],

        // 詰み1手: 角の斜め利きで詰める
        'mate_1hand_kaku_diagonal' => [
            'description' => '角の斜め利きで後手玉を詰める（1手詰め）',
            'turn' => 'sente',
            'board' => [
                '1' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'gyoku', 'color' => 'gote'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '2' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => null,
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '3' => [
                    '1' => ['type' => 'kaku', 'color' => 'sente'],
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => null,
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '4' => array_fill(1, 9, null),
                '5' => array_fill(1, 9, null),
                '6' => array_fill(1, 9, null),
                '7' => array_fill(1, 9, null),
                '8' => array_fill(1, 9, null),
                '9' => array_fill(1, 9, null),
            ],
            'hand' => ['sente' => [], 'gote' => []],
            'expected_move' => ['from' => ['rank' => 3, 'file' => 1], 'to' => ['rank' => 1, 'file' => 3]],
            'expected_mating_move' => true,
        ],

        // 詰み1手: 金で詰める
        'mate_1hand_kin' => [
            'description' => '金で後手玉を詰める（1手詰め）',
            'turn' => 'sente',
            'board' => [
                '1' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'gyoku', 'color' => 'gote'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '2' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => ['type' => 'kin', 'color' => 'sente'],
                    '5' => null,
                    '6' => ['type' => 'kin', 'color' => 'sente'],
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '3' => array_fill(1, 9, null),
                '4' => array_fill(1, 9, null),
                '5' => array_fill(1, 9, null),
                '6' => array_fill(1, 9, null),
                '7' => array_fill(1, 9, null),
                '8' => array_fill(1, 9, null),
                '9' => array_fill(1, 9, null),
            ],
            'hand' => ['sente' => [], 'gote' => []],
            'expected_move' => ['from' => ['rank' => 2, 'file' => 4], 'to' => ['rank' => 1, 'file' => 4]],
            'expected_mating_move' => true,
        ],
    ],

    // ========== 中級詰み（3手詰め） ==========
    'intermediate' => [
        // 詰み3手: 飛車と金の組み合わせ
        'mate_3hand_hisha_kin' => [
            'description' => '飛車と金で詰める（3手詰め）',
            'turn' => 'sente',
            'board' => [
                '1' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'gyoku', 'color' => 'gote'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '2' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => ['type' => 'fu', 'color' => 'gote'],
                    '5' => null,
                    '6' => ['type' => 'fu', 'color' => 'gote'],
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '3' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'hisha', 'color' => 'sente'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '4' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => null,
                    '6' => ['type' => 'kin', 'color' => 'sente'],
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '5' => array_fill(1, 9, null),
                '6' => array_fill(1, 9, null),
                '7' => array_fill(1, 9, null),
                '8' => array_fill(1, 9, null),
                '9' => array_fill(1, 9, null),
            ],
            'hand' => ['sente' => [], 'gote' => []],
            'expected_first_move' => ['from' => ['rank' => 3, 'file' => 5], 'to' => ['rank' => 1, 'file' => 5]],
            'expected_mating_moves' => 3,
        ],

        // 詰み3手: 飛車と角の組み合わせ
        'mate_3hand_hisha_kaku' => [
            'description' => '飛車と角で詰める（3手詰め）',
            'turn' => 'sente',
            'board' => [
                '1' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'gyoku', 'color' => 'gote'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '2' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => ['type' => 'fu', 'color' => 'gote'],
                    '5' => null,
                    '6' => ['type' => 'fu', 'color' => 'gote'],
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '3' => [
                    '1' => ['type' => 'kaku', 'color' => 'sente'],
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'hisha', 'color' => 'sente'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '4' => array_fill(1, 9, null),
                '5' => array_fill(1, 9, null),
                '6' => array_fill(1, 9, null),
                '7' => array_fill(1, 9, null),
                '8' => array_fill(1, 9, null),
                '9' => array_fill(1, 9, null),
            ],
            'hand' => ['sente' => [], 'gote' => []],
            'expected_first_move' => ['from' => ['rank' => 3, 'file' => 5], 'to' => ['rank' => 1, 'file' => 5]],
            'expected_mating_moves' => 3,
        ],
    ],

    // ========== 上級詰み（5手詰め以上） ==========
    'advanced' => [
        // 詰み5手: 複数の駒の連携
        'mate_5hand_complex' => [
            'description' => '複数の駒の連携で詰める（5手詰め）',
            'turn' => 'sente',
            'board' => [
                '1' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'gyoku', 'color' => 'gote'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '2' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => ['type' => 'fu', 'color' => 'gote'],
                    '5' => null,
                    '6' => ['type' => 'fu', 'color' => 'gote'],
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '3' => [
                    '1' => ['type' => 'kaku', 'color' => 'sente'],
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'hisha', 'color' => 'sente'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '4' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => null,
                    '6' => ['type' => 'kin', 'color' => 'sente'],
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '5' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => null,
                    '6' => ['type' => 'fu', 'color' => 'sente'],
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '6' => array_fill(1, 9, null),
                '7' => array_fill(1, 9, null),
                '8' => array_fill(1, 9, null),
                '9' => array_fill(1, 9, null),
            ],
            'hand' => ['sente' => [], 'gote' => []],
            'expected_mating_moves' => 5,
        ],
    ],

    // ========== 打ち歩詰めシナリオ ==========
    'uchifuzume_scenarios' => [
        // 打ち歩詰めの典型例
        'uchifuzume_forbidden_pawn_drop' => [
            'description' => '歩を打つことで直後に詰みになる禁止手',
            'turn' => 'sente',
            'board' => [
                '1' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'gyoku', 'color' => 'gote'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '2' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'fu', 'color' => 'sente'],  // この下に歩を打つと詰み
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '3' => array_fill(1, 9, null),
                '4' => array_fill(1, 9, null),
                '5' => array_fill(1, 9, null),
                '6' => array_fill(1, 9, null),
                '7' => array_fill(1, 9, null),
                '8' => array_fill(1, 9, null),
                '9' => array_fill(1, 9, null),
            ],
            'hand' => ['sente' => ['fu' => 1], 'gote' => []],
            'forbidden_drop' => ['rank' => 1, 'file' => 5],
            'should_be_rejected' => true,
        ],

        // 打ち歩詰めではない通常の歩打ち
        'uchifuzume_normal_pawn_drop' => [
            'description' => '詰みにならない通常の歩打ち',
            'turn' => 'sente',
            'board' => [
                '1' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'gyoku', 'color' => 'gote'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '2' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => null,
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '3' => [
                    '1' => null,
                    '2' => null,
                    '3' => null,
                    '4' => null,
                    '5' => ['type' => 'hisha', 'color' => 'sente'],
                    '6' => null,
                    '7' => null,
                    '8' => null,
                    '9' => null,
                ],
                '4' => array_fill(1, 9, null),
                '5' => array_fill(1, 9, null),
                '6' => array_fill(1, 9, null),
                '7' => array_fill(1, 9, null),
                '8' => array_fill(1, 9, null),
                '9' => array_fill(1, 9, null),
            ],
            'hand' => ['sente' => ['fu' => 1], 'gote' => []],
            'allowed_drop' => ['rank' => 2, 'file' => 5],
            'should_be_accepted' => true,
        ],
    ],

    // ========== 千日手シナリオ ==========
    'sennichite_scenarios' => [
        // 3回同じ局面
        'sennichite_triple_repetition' => [
            'description' => '3回同じ局面が現れるシナリオ',
            'position_1' => [
                'board' => [
                    '1' => array_fill(1, 9, null),
                    '2' => array_fill(1, 9, null),
                    '3' => array_fill(1, 9, null),
                    '4' => array_fill(1, 9, null),
                    '5' => [
                        '1' => null,
                        '2' => null,
                        '3' => null,
                        '4' => null,
                        '5' => ['type' => 'gyoku', 'color' => 'gote'],
                        '6' => null,
                        '7' => null,
                        '8' => null,
                        '9' => null,
                    ],
                    '6' => array_fill(1, 9, null),
                    '7' => array_fill(1, 9, null),
                    '8' => array_fill(1, 9, null),
                    '9' => array_fill(1, 9, null),
                ],
                'turn' => 'sente',
            ],
            'is_draw' => true,
        ],
    ],
];
